<!-- 
 * @license
 * Copyright Coinversable B.V. All Rights Reserved.
 *
 * Use of this source code is governed by a AGPLv3-style license that can be
 * found in the LICENSE file at https://coinversable.com/agplv3-license/
 * 
 * For more information about the Validana blockchain visit 
 * https://validana.io
-->

<div>

    <!-- Title with count of current badgeclass endorsements -->
    <h2 class="title title-is-smallmobile" i18n>Current endorsements ({{endorsements?.length}} total)</h2>

    <!-- Message if no endorsements were found on blockchain -->
    <div *ngIf="!endorsements?.length">
        <span i18n>No endorsements found on blockchain</span>
    </div>
</div>

<!-- Button to store JSON (metadata) of badgeclass on blockchain-->
<button type="submit"
style="float:right;margin:10px;"
class="button"
(click)="sendMetadataToBlockchain()"
[disabled]="!submitEnabled"
*ngIf="validanaService.getLastKnownRole() === 'entity'">Store JSON on blockchain</button>

<!-- Button to endorse badge class -->
<button type="submit"
style="float:right;margin:10px;"
class="button"
(click)="toggleWithdrawState()"
[disabled]="!submitEnabled"
*ngIf="validanaService.getLastKnownRole() === 'entity'"
>{{ hasEndorsedBadgeClass?'Withdraw endorsement':'Endorse Badge Class' }}</button>

<!-- Table with current endorsers of badge class-->
<table class="table" *ngIf="endorsements?.length">
    <thead>
        <tr>
            <th scope="col">Endorser Name</th>
            <th scope="col">Endorser Institute</th>
            <th scope="col">Endorser Address</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let end of endorsements">
            <th scope="row">
                {{ end.name }}
            </th>
            <td scope="row">
                {{ parents[end.parent] ? parents[end.parent].name : end.parent }}
            </td>
            <th scope="row">
                {{ end.addr }}
            </th>
        </tr>
    </tbody>
</table>

<!-- Spacer to help visual alignment -->
<div class="spacer"></div>